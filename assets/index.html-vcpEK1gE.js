import{_ as i,c as a,a as n,o as e}from"./app-MELpoaNE.js";const l={};function p(t,s){return e(),a("div",null,s[0]||(s[0]=[n(`<p>Elasticsearch 可以通过 Docker 快速部署，而使用 <code>docker-compose</code> 可以更方便地管理多个容器（如 Elasticsearch 和 Kibana）。以下是使用 <code>docker-compose</code> 启动 Elasticsearch 容器的详细步骤。</p><hr><h2 id="_3-1-使用-docker-compose-启动-elasticsearch" tabindex="-1"><a class="header-anchor" href="#_3-1-使用-docker-compose-启动-elasticsearch"><span>3.1 使用 Docker Compose 启动 Elasticsearch</span></a></h2><h3 id="_3-1-1-安装-docker-和-docker-compose" tabindex="-1"><a class="header-anchor" href="#_3-1-1-安装-docker-和-docker-compose"><span>3.1.1 安装 Docker 和 Docker Compose</span></a></h3><hr><h3 id="_3-1-2-创建-docker-compose-yml-文件" tabindex="-1"><a class="header-anchor" href="#_3-1-2-创建-docker-compose-yml-文件"><span>3.1.2 创建 <code>docker-compose.yml</code> 文件</span></a></h3><ol><li><strong>创建项目目录</strong>： 创建一个目录用于存放 <code>docker-compose.yml</code> 文件：</li></ol><div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">mkdir</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span>
<span class="line"><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cd</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> elasticsearch</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div></div></div><ol start="2"><li><strong>编写 <code>docker-compose.yml</code> 文件</strong>： 在项目目录中创建 <code>docker-compose.yml</code> 文件，并添加以下内容：</li></ol><div class="language-yaml line-numbers-mode" data-ext="yaml" data-title="yaml"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span>version: &#39;3.9&#39;</span></span>
<span class="line"><span>services:</span></span>
<span class="line"><span>  elasticsearch:</span></span>
<span class="line"><span>    container_name: elasticsearch</span></span>
<span class="line"><span>    hostname: elasticsearch</span></span>
<span class="line"><span>    image: docker.elastic.co/elasticsearch/elasticsearch:\${STACK_VERSION} # https://hub.docker.com/_/elasticsearch/tags</span></span>
<span class="line"><span>    # restart: &#39;always&#39;</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &#39;9200:9200&#39;</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      - cluster.name=cluster-elasticsearch # 设置集群名称为 elasticsearch</span></span>
<span class="line"><span>      - discovery.type=single-node # 以单一节点模式启动</span></span>
<span class="line"><span>      - http.cors.enabled=true # 开启cors以便使用Head插件</span></span>
<span class="line"><span>      - http.cors.allow-origin=&quot;*&quot;</span></span>
<span class="line"><span>      - xpack.security.enabled=true</span></span>
<span class="line"><span>      - ingest.geoip.downloader.enabled=false</span></span>
<span class="line"><span>      - ELASTIC_PASSWORD=\${ELASTIC_PASSWORD}</span></span>
<span class="line"><span>      - &quot;ES_JAVA_OPTS=-Xms1g -Xmx4g&quot; # 设置使用jvm内存大小</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      # 中文分词插件： https://github.com/infinilabs/analysis-ik/releases/download/v7.17.7/elasticsearch-analysis-ik-7.17.7.zip</span></span>
<span class="line"><span>      # 中文分词插件新地址：https://release.infinilabs.com/analysis-ik/stable/elasticsearch-analysis-ik-7.17.7.zip</span></span>
<span class="line"><span>      # 拼音分词插件： https://github.com/infinilabs/analysis-pinyin/releases/download/v7.17.7/elasticsearch-analysis-pinyin-7.17.7.zip</span></span>
<span class="line"><span>      # 拼音分词插件新地址： https://release.infinilabs.com/analysis-pinyin/stable/elasticsearch-analysis-pinyin-7.17.7.zip</span></span>
<span class="line"><span>      - ./plugins:/usr/share/elasticsearch/plugins # 插件文件挂载</span></span>
<span class="line"><span>      - ./data/es:/usr/share/elasticsearch/data</span></span>
<span class="line"><span>    deploy:</span></span>
<span class="line"><span>      resources:</span></span>
<span class="line"><span>        limits:</span></span>
<span class="line"><span>          cpus: &#39;0.50&#39; # 限制容器 cpu 最大占用宿主 cpu 总量的 50%</span></span>
<span class="line"><span>          memory: 4G  # 限制容器 内存 最大值</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      network-es: # 指定外部共享网络名称</span></span>
<span class="line"><span>        aliases:</span></span>
<span class="line"><span>          - es</span></span>
<span class="line"><span>          - elasticsearch</span></span>
<span class="line"><span>  kibana:</span></span>
<span class="line"><span>    container_name: kibana</span></span>
<span class="line"><span>    hostname: kibana</span></span>
<span class="line"><span>    image: docker.elastic.co/kibana/kibana:\${STACK_VERSION}</span></span>
<span class="line"><span>    # restart: &#39;always&#39;</span></span>
<span class="line"><span>    ports:</span></span>
<span class="line"><span>      - &#39;5601:5601&#39;</span></span>
<span class="line"><span>    environment:</span></span>
<span class="line"><span>      I18N_LOCALE: zh-CN</span></span>
<span class="line"><span>      ELASTICSEARCH_HOSTS: http://elasticsearch:9200 # 设置访问elasticsearch的地址</span></span>
<span class="line"><span>      ELASTICSEARCH_USERNAME: elastic</span></span>
<span class="line"><span>      ELASTICSEARCH_PASSWORD: \${KIBANA_PASSWORD}</span></span>
<span class="line"><span>      #&quot;elasticsearch.hosts=http://es:9200&quot; # 设置访问 elasticsearch 的地址</span></span>
<span class="line"><span>    volumes:</span></span>
<span class="line"><span>      - ./data/certs:/usr/share/kibana/config/certs</span></span>
<span class="line"><span>      - ./data/kibana:/usr/share/kibana/data</span></span>
<span class="line"><span>    deploy:</span></span>
<span class="line"><span>      resources:</span></span>
<span class="line"><span>        limits:</span></span>
<span class="line"><span>          cpus: &#39;0.50&#39; # 限制容器 cpu 最大占用宿主 cpu 总量的 50%</span></span>
<span class="line"><span>          memory: 1G  # 限制容器 内存 最大值</span></span>
<span class="line"><span>    networks:</span></span>
<span class="line"><span>      network-es: # 指定外部共享网络名称</span></span>
<span class="line"><span>        aliases:</span></span>
<span class="line"><span>          - kibana</span></span>
<span class="line"><span>networks:</span></span>
<span class="line"><span>  network-es:</span></span>
<span class="line"><span>    external: true # true:表示加入外部已经创建好的网络，网络不存在时会报错</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div><h3 id="_3-1-3-启动容器" tabindex="-1"><a class="header-anchor" href="#_3-1-3-启动容器"><span>3.1.3 启动容器</span></a></h3><ol><li><p><strong>启动 Elasticsearch 和 Kibana</strong>：</p><ul><li>在项目目录中运行以下命令，启动容器：<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> up</span><span style="--shiki-light:#A65E2B;--shiki-dark:#C99076;"> -d</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>查看容器状态</strong>：</p><ul><li>运行以下命令，查看容器是否正常运行：<div class="language-bash line-numbers-mode" data-ext="bash" data-title="bash"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#59873A;--shiki-dark:#80A665;">docker-compose</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;"> ps</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div></div></div></li></ul></li><li><p><strong>访问 Elasticsearch</strong>：</p><ul><li>打开浏览器，访问 <code>http://localhost:9200</code>，如果看到类似以下输出，说明 Elasticsearch 已成功运行：<div class="language-json line-numbers-mode" data-ext="json" data-title="json"><button class="copy" title="复制代码" data-copied="已复制"></button><pre class="shiki shiki-themes vitesse-light vitesse-dark vp-code"><code><span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">{</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">name</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">node-1</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster_name</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">elasticsearch</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">cluster_uuid</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">abc123</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">version</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#999999;--shiki-dark:#666666;"> {</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">number</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">8.10.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">build_flavor</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">default</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">build_type</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">docker</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">build_hash</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">abc123</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">build_date</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">2023-10-01T00:00:00.000Z</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">build_snapshot</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#1E754F;--shiki-dark:#4D9375;"> false</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">lucene_version</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">9.7.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">minimum_wire_compatibility_version</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">7.17.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">,</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">    &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">minimum_index_compatibility_version</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">7.0.0</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">  },</span></span>
<span class="line"><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">  &quot;</span><span style="--shiki-light:#998418;--shiki-dark:#B8A965;">tagline</span><span style="--shiki-light:#99841877;--shiki-dark:#B8A96577;">&quot;</span><span style="--shiki-light:#999999;--shiki-dark:#666666;">:</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;"> &quot;</span><span style="--shiki-light:#B56959;--shiki-dark:#C98A7D;">You Know, for Search</span><span style="--shiki-light:#B5695977;--shiki-dark:#C98A7D77;">&quot;</span></span>
<span class="line"><span style="--shiki-light:#999999;--shiki-dark:#666666;">}</span></span></code></pre><div class="line-numbers" aria-hidden="true" style="counter-reset:line-number 0;"><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div><div class="line-number"></div></div></div></li></ul></li><li><p><strong>访问 Kibana</strong>：</p><ul><li>打开浏览器，访问 <code>http://localhost:5601</code>，即可使用 Kibana。</li></ul></li></ol>`,12)]))}const d=i(l,[["render",p],["__file","index.html.vue"]]),r=JSON.parse('{"path":"/elasticsearch/6pq9z43e/","title":"elasticsearch安装与配置","lang":"zh-CN","frontmatter":{"title":"elasticsearch安装与配置","createTime":"2025/03/07 11:49:16","permalink":"/elasticsearch/6pq9z43e/"},"headers":[],"readingTime":{"minutes":2.01,"words":603},"git":{"updatedTime":1741686051000,"contributors":[{"name":"netjic","username":"netjic","email":"netjic@163.com","commits":1,"avatar":"https://gravatar.com/avatar/374578fe375437866193fe849b770e3f9c74eacc1a7125303870c05b7a97309d?d=retro"}]},"filePathRelative":"notes/elasticsearch/3.elasticsearch安装与配置.md","bulletin":false}');export{d as comp,r as data};
